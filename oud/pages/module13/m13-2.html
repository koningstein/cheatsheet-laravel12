<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Unit vs Feature Tests - Quality Assurance - Laravel 12</title>
    <link rel="stylesheet" href="../../../style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="../../../script.js" defer></script>
</head>
<body>
<div class="top-bar"><div class="top-bar-content"><div class="nav-group"><a href="../module12/m12-7.html">« Services & Features</a></div><div class="nav-group theme-switcher"><select id="theme-switcher"><option value="blue">Blauw</option></select></div></div></div>

<div class="container">
    <div class="header-nav-block">
        <header>
            <h1>Quality Assurance</h1>
            <p>Codekwaliteit, testen met PHPUnit, Pest & Dusk, en debugging.</p>
        </header>
        <nav>
            <ul>
                <li><a href="m13-1.html">Introductie & PHPUnit</a></li>
                <li><a href="m13-2.html" class="active">Unit vs Feature Tests</a></li>
                <li><a href="m13-3.html">Introductie Pest</a></li>
                <li><a href="m13-4.html">Unit & Feature Tests (Pest)</a></li>
                <li><a href="m13-5.html">Database Testing & Seeding</a></li>
                <li><a href="m13-6.html">Mocking & Spies</a></li>
                <li><a href="m13-7.html">Browser Testing (Dusk)</a></li>
                <li><a href="m13-8.html">Static Analysis & Debugging</a></li>
            </ul>
        </nav>
    </div>

    <main>
        <h2>Het cruciale verschil: Unit vs Feature</h2>
        <p>Een van de belangrijkste concepten in testen is begrijpen <em>wat</em> je test. Een veelgemaakte fout bij beginners is om alles met Feature tests te willen testen. Dit maakt je test suite traag en moeilijk te onderhouden. We kijken naar de twee smaken: <strong>Unit</strong> en <strong>Feature</strong>.</p>

        <h3>1. Unit Tests (De Bouwstenen)</h3>
        <p>Een Unit Test heeft een zeer beperkte <strong>scope</strong>. Je test één specifieke class of methode in absolute isolatie.
            <br>Denk aan de analogie van een auto: Een Unit Test controleert of <em>één specifiek tandwieltje</em> soepel draait als je het los op tafel legt.</p>

        <p><strong>Kenmerken van een Unit Test:</strong></p>
        <ul>
            <li><strong>Snelheid:</strong> Razendsnel. Je kunt er duizenden per seconde draaien.</li>
            <li><strong>Geen Database:</strong> Je raakt de database niet aan.</li>
            <li><strong>Geen HTTP:</strong> Je simuleert geen web-requests.</li>
            <li><strong>Geen Laravel Framework:</strong> Vaak start Laravel niet eens op.</li>
        </ul>

        <p>Laten we een voorbeeld nemen. Stel je hebt een Service Class die BTW berekent. Dit is pure rekenlogica.</p>

        <div class="note-box">De Code: <code>app/Services/PriceCalculator.php</code></div>
        <pre><code class="language-php">
namespace App\Services;

class PriceCalculator
{
    public function calculateVat(float $amount, float $percentage): float
    {
        return $amount * (1 + ($percentage / 100));
    }
}
        </code></pre>

        <p>De bijbehorende Unit Test maakt gewoon een instantie van de class (<code>new PriceCalculator</code>) en roept de functie aan. Let op dat we de kale <code>PHPUnit\Framework\TestCase</code> gebruiken, niet de Laravel variant.</p>

        <div class="note-box">De Test: <code>tests/Unit/PriceCalculatorTest.php</code></div>
        <pre><code class="language-php">
namespace Tests\Unit;

use PHPUnit\Framework\TestCase; // Kale PHPUnit
use App\Services\PriceCalculator;

class PriceCalculatorTest extends TestCase
{
    public function test_it_calculates_vat_correctly()
    {
        // 1. Arrange (Klaarzetten)
        $calculator = new PriceCalculator();

        // 2. Act (Actie uitvoeren)
        $result = $calculator->calculateVat(100.00, 21);

        // 3. Assert (Controleren)
        $this->assertEquals(121.00, $result);
    }
}
        </code></pre>

        <h3>2. Feature Tests (Het Voertuig)</h3>
        <p>Een Feature Test heeft een grote <strong>scope</strong>. Je test een functionaliteit vanuit het oogpunt van de gebruiker.
            <br>Analogie: Je test of de auto start, rijdt en remt. Hierbij werken de motor, de wielen en de remmen samen.</p>

        <p><strong>Kenmerken van een Feature Test:</strong></p>
        <ul>
            <li><strong>Snelheid:</strong> Trager. Voor elke test moet het Laravel framework opstarten.</li>
            <li><strong>Integratie:</strong> Test de samenwerking tussen Routing, Controllers, Database en Views.</li>
            <li><strong>Simulatie:</strong> Je doet alsof je een HTTP request maakt (bijv. <code>GET /projects</code>).</li>
        </ul>

        <p>Hier testen we of de projecten-pagina bereikbaar is. In de achtergrond moet Laravel de route vinden, de controller uitvoeren, data ophalen (optioneel) en de view renderen.</p>

        <div class="note-box">De Test: <code>tests/Feature/ProjectTest.php</code></div>
        <pre><code class="language-php">
namespace Tests\Feature;

use Tests\TestCase; // De Laravel TestCase (start de app op)

class ProjectTest extends TestCase
{
    public function test_user_can_view_projects_page()
    {
        // Act: Doe een gesimuleerd HTTP GET request
        $response = $this->get('/projects');

        // Assert:
        // 1. Krijgen we een 200 OK terug?
        $response->assertStatus(200);

        // 2. Staat de juiste tekst op het scherm?
        $response->assertSee('Onze Projecten');
    }
}
        </code></pre>

        <h3>Wanneer kies je wat?</h3>
        <p>Gebruik de volgende vuistregel:</p>
        <ul>
            <li><strong>Unit Tests:</strong> Voor complexe berekeningen, algoritmes, string-manipulaties of business logica in Models/Services. Als het "fout" kan gaan in de logica, schrijf je een unit test.</li>
            <li><strong>Feature Tests:</strong> Voor alles wat met de "flow" van je applicatie te maken heeft. Werkt de route? Wordt er iets opgeslagen in de database? Krijg ik een validatie-error als ik het formulier leeg laat?</li>
        </ul>
    </main>
</div>
<footer><div class="footer-content"><p>&copy; 2025 Techniek College Rotterdam</p></div></footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
</body>
</html>