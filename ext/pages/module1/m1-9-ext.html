<!DOCTYPE html>
<html lang="nl" data-theme="light" data-color="red">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delete & Destroy - Laravel 12 Module 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <link rel="stylesheet" href="../../style.css">
</head>
<body>

<header>
    <a href="../../index.html" class="logo">
        <svg width="30" height="30" viewBox="0 0 100 100" fill="currentColor"><path d="M50 0L10 20L10 80L50 100L90 80L90 20L50 0Z"/></svg>
        Laravel 12
    </a>
    <div class="header-controls">
        <button class="btn-control" id="color-toggle">ðŸŽ¨ Kleur</button>
        <button class="btn-control" id="theme-toggle">ðŸŒ“ Thema</button>
        <button class="mobile-menu-btn" id="menu-toggle">â˜°</button>
    </div>
</header>

<div class="layout-wrapper">
    <nav class="sidebar-left">

        <div class="nav-group">
            <h3>Cursus Modules</h3>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 1: Basis CRUD
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu" style="display:block;">
                    <li><a href="m1-1-ext.html">Model & Migration</a></li>
                    <li><a href="m1-2-ext.html">Factory & Seeding</a></li>
                    <li><a href="m1-3-ext.html">Layouts & Tailwind</a></li>
                    <li><a href="m1-4-ext.html">Controller Index</a></li>
                    <li><a href="m1-5-ext.html">Create & Store</a></li>
                    <li><a href="m1-6-ext.html">Validatie & Flash</a></li>
                    <li><a href="m1-7-ext.html">Detailpagina (Show)</a></li>
                    <li><a href="m1-8-ext.html">Edit & Update</a></li>
                    <li><a href="m1-9-ext.html" class="current">Delete & Destroy</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 2: Users & Security
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module2/m2-1.html">Publieke Layout</a></li>
                    <li><a href="../module2/m2-2.html">Simpele Publieke Pagina</a></li>
                    <li><a href="../module2/m2-3.html">Roles & Permissions</a></li>
                    <li><a href="../module2/m2-4.html">Aanmaken van Users</a></li>
                    <li><a href="../module2/m2-5.html">Middleware bij Routes</a></li>
                    <li><a href="../module2/m2-6.html">Rolgebaseerde Toegang</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 3: Advanced Admin
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module3/m3-1.html">Models & Migrations</a></li>
                    <li><a href="../module3/m3-2.html">Factories met Relaties</a></li>
                    <li><a href="../module3/m3-3.html">Seeders met Relaties</a></li>
                    <li><a href="../module3/m3-4.html">Index & Eager Loading</a></li>
                    <li><a href="../module3/m3-5.html">Permissions</a></li>
                    <li><a href="../module3/m3-6.html">Create & Dropdowns</a></li>
                    <li><a href="../module3/m3-7.html">Store & Validatie</a></li>
                    <li><a href="../module3/m3-8.html">Show & Relaties</a></li>
                    <li><a href="../module3/m3-9.html">Edit & Pre-select</a></li>
                    <li><a href="../module3/m3-10.html">Update & Logica</a></li>
                    <li><a href="../module3/m3-11.html">Delete View</a></li>
                    <li><a href="../module3/m3-12.html">Destroy & Constraints</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 4: Webshop Features
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module4/m4-1.html">Publieke Productpagina</a></li>
                    <li><a href="../module4/m4-2.html">De Product Show</a></li>
                    <li><a href="../module4/m4-3.html">Reviews Setup (DB)</a></li>
                    <li><a href="../module4/m4-4.html">Reviews Tonen</a></li>
                    <li><a href="../module4/m4-5.html">Reviews Plaatsen</a></li>
                    <li><a href="../module4/m4-6.html">Winkelwagen Setup</a></li>
                    <li><a href="../module4/m4-7.html">Winkelwagen Tonen</a></li>
                    <li><a href="../module4/m4-8.html">Winkelwagen Wijzigen</a></li>
                </ul>
            </div>

            <div class="nav-item-container">
                <button class="nav-toggle">
                    Module 5: Orders & Validatie
                    <svg class="chevron" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>
                </button>
                <ul class="submenu">
                    <li><a href="../module5/m5-1.html">Orders Structuur</a></li>
                    <li><a href="../module5/m5-2.html">Order Seeds</a></li>
                    <li><a href="../module5/m5-3.html">Orders Opslaan</a></li>
                    <li><a href="../module5/m5-4.html">Orders Tonen</a></li>
                    <li><a href="../module5/m5-5.html">Order naar PDF</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <main class="main-content">
        <h1>Resource Controller: Delete & Destroy</h1>
        <p>In een standaard Resource Controller van Laravel vind je wel een <code>destroy</code> methode (voor het daadwerkelijk verwijderen), maar geen <code>delete</code> methode (voor een bevestigingsscherm). Standaard zou een item direct verwijderd worden als je op de knop drukt. Dat is niet erg gebruiksvriendelijk; als je per ongeluk klikt, ben je je data kwijt.</p>

        <p>Daarom gaan we zelf een tussenstap bouwen: de <strong>Delete</strong> pagina. Hier ziet de gebruiker wat hij gaat verwijderen en moet hij dit bevestigen.</p>

        <h2 id="link-index">1. Linken vanaf de Index</h2>
        <p>We beginnen in de view <code>resources/views/admin/categories/index.blade.php</code>. We voegen een linkje toe naar onze nieuwe delete-pagina. We gebruiken hiervoor de named route <code>admin.categories.delete</code>. Let op: deze route bestaat nog niet standaard in Laravel!</p>

        <pre><code class="language-html">
&lt;td class="px-6 py-4 whitespace-nowrap text-sm font-medium"&gt;
    &lt;a href="{{ route('admin.categories.edit', $category) }}" class="text-indigo-600 hover:text-indigo-900 mr-3"&gt;Wijzig&lt;/a&gt;

    &lt;a href="{{ route('admin.categories.delete', $category) }}" class="text-red-600 hover:text-red-900"&gt;Verwijder&lt;/a&gt;
&lt;/td&gt;
        </code></pre>

        <h2 id="routing">2. Extra Route Toevoegen</h2>
        <p>Omdat <code>delete</code> geen onderdeel is van de standaard Resource Route, moeten we deze handmatig toevoegen in <code>routes/web.php</code>.</p>

        <div class="info-box" style="background: var(--bg-content); border: 1px solid var(--border-color); padding: 1rem; border-radius: 0.5rem;">
            <strong>Let op: Volgorde van Routes</strong><br>
            Zet deze nieuwe route <strong>boven</strong> de <code>Route::resource</code> regel. Laravel leest routes van boven naar beneden. Als je de resource route eerst zet, kan het zijn dat Laravel denkt dat <code>/categories/1/delete</code> eigenlijk de show pagina is van een categorie met ID '1/delete'.
        </div>

        <pre><code class="language-php">
// routes/web.php

// Extra route voor de delete bevestigingspagina
Route::get('/admin/categories/{category}/delete', [CategoryController::class, 'delete'])
    ->name('admin.categories.delete');

// De standaard resource route
Route::resource('admin/categories', CategoryController::class);
        </code></pre>

        <h2 id="delete-method">3. De Delete Methode</h2>
        <p>Nu voegen we de <code>delete</code> methode toe aan onze <code>CategoryController</code>. Ik zet deze meestal tussen <code>update</code> en <code>destroy</code> in voor de logica.</p>
        <p>Dankzij Model Binding hebben we de categorie al beschikbaar.</p>

        <pre><code class="language-php">
/**
 * Show the form for deleting the specified resource.
 */
public function delete(Category $category): View
{
    return view('admin.categories.delete', [
        'category' => $category
    ]);
}
        </code></pre>

        <h2 id="delete-view">4. De Delete View</h2>
        <p>We maken het bestand <code>resources/views/admin/categories/delete.blade.php</code> aan. Je kunt hiervoor de code van <code>edit.blade.php</code> kopiÃ«ren, want de layout is bijna hetzelfde. We passen echter een paar cruciale dingen aan:</p>

        <h3 id="disabled-inputs">Disabled Inputs</h3>
        <p>Omdat dit alleen een bevestiging is, willen we niet dat de gebruiker de gegevens nog kan aanpassen. Daarom voegen we het attribuut <code>disabled</code> toe aan alle invoervelden. Ook hebben we geen <code>old()</code> functie meer nodig, we tonen simpelweg de data uit de database.</p>

        <h3 id="delete-form">Het Formulier</h3>
        <ul>
            <li><strong>Method:</strong> We moeten de <code>destroy</code> methode aanroepen. Volgens de resource controller regels moet dit met een <strong>DELETE</strong> request. Omdat HTML formulieren dit niet kunnen, gebruiken we <code>@method('DELETE')</code>.</li>
            <li><strong>Action:</strong> De route is <code>admin.categories.destroy</code>.</li>
            <li><strong>Knop:</strong> De tekst op de knop veranderen we naar "Verwijderen" en we maken hem rood voor de duidelijkheid.</li>
        </ul>

        <pre><code class="language-html">
@section('content')
    &lt;div class="card mt-6"&gt;
        &lt;div class="card-body"&gt;
            &lt;h3 class="text-lg font-medium text-gray-900 mb-4"&gt;Weet je zeker dat je deze categorie wilt verwijderen?&lt;/h3&gt;

            &lt;form action="{{ route('admin.categories.destroy', $category) }}" method="POST"&gt;
                @csrf
                @method('DELETE') &lt;!-- Dit zorgt voor de juiste request naar destroy --&gt;

                &lt;div class="mb-4"&gt;
                    &lt;label class="block text-gray-700 text-sm font-bold mb-2" for="name"&gt;
                        Naam
                    &lt;/label&gt;
                    &lt;input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight bg-gray-100"
                           id="name"
                           type="text"
                           value="{{ $category-&gt;name }}"
                           disabled&gt;
                &lt;/div&gt;

                &lt;div class="flex items-center justify-between"&gt;
                    &lt;a href="{{ route('admin.categories.index') }}" class="text-gray-600 hover:text-gray-900"&gt;Annuleren&lt;/a&gt;

                    &lt;button class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded" type="submit"&gt;
                        Verwijderen
                    &lt;/button&gt;
                &lt;/div&gt;
            &lt;/form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
@endsection
        </code></pre>

        <h2 id="destroy-method">5. De Destroy Methode</h2>
        <p>Als de gebruiker op de rode knop drukt, wordt de <code>destroy</code> methode in de controller aangeroepen. Hier voeren we de daadwerkelijke verwijdering uit.</p>

        <pre><code class="language-php">
public function destroy(Category $category): RedirectResponse
{
    // 1. Verwijder de categorie uit de database
    $category->delete();

    // 2. Redirect naar de index met een melding
    return to_route('admin.categories.index')
        ->with('status', 'Categorie succesvol verwijderd!');
}
        </code></pre>

        <p>Nu is je volledige CRUD (Create, Read, Update, Delete) compleet! De gebruiker kan veilig items beheren zonder per ongeluk iets weg te gooien.</p>

    </main>

    <aside class="sidebar-right">
        <div class="toc-container">
            <h4>Inhoud</h4>
            <ul id="toc-list" class="toc-list">
            </ul>
        </div>
    </aside>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
<script src="../../script.js"></script>
</body>
</html>